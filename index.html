<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>계산기</title>
  <meta name="viewport" content="width=400, initial-scale=1">
  <!-- 구글 애드센스 광고 스크립트 (HEAD에 한 번만!) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4634078773523032"
     crossorigin="anonymous"></script>
  <style>
    body {
      background: #fdf6fb;
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', Arial, sans-serif;
    }
    .container {
      max-width: 330px;
      margin: 60px auto 16px auto;
      background: #fff7f0;
      border-radius: 16px;
      box-shadow: 0 2px 16px rgba(211, 183, 255, 0.15);
      padding: 24px;
    }
    h1 {
      text-align: center;
      color: #8c8cff;
      margin-bottom: 16px;
      font-size: 1.6em;
      font-weight: 600;
      letter-spacing: 0.03em;
    }
    .display {
      width: 100%;
      height: 48px;
      font-size: 1.5em;
      text-align: right;
      border: 1px solid #e6cfff;
      border-radius: 9px;
      margin-bottom: 14px;
      padding: 0 12px;
      background: #f3f3fd;
      color: #6f6f8f;
      box-sizing: border-box;
    }
    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 9px;
    }
    button {
      padding: 14px 0;
      font-size: 1.18em;
      border: none;
      border-radius: 9px;
      cursor: pointer;
      transition: background 0.18s;
      font-weight: 500;
      box-shadow: 0 0.5px 2px rgba(100,100,180,0.06);
    }
    button:nth-child(4n+1) { background: #ffe0e6; color: #c4636e;}
    button:nth-child(4n+2) { background: #eaf7ff; color: #5282a7;}
    button:nth-child(4n+3) { background: #f6ffe5; color: #75a15e;}
    button:nth-child(4n)   { background: #fff6e3; color: #d5a34e;}
    button:hover, button:focus { filter: brightness(0.95); }
    .equals {
      background: #bdf6ff;
      color: #00a5b0;
      grid-column: span 4;
      font-weight: bold;
      margin-top: 5px;
    }
    .equals:hover { background: #90eaf5; }
    .ac {
      background: #fbe6ff;
      color: #c463c4;
    }
    .ac:hover { background: #f2c7fa; }
    .ads {
      margin: 30px auto 20px auto;
      text-align: center;
      max-width: 320px;
    }
    .history {
      background: #f2fefd;
      padding: 10px;
      border-radius: 9px;
      margin-top: 22px;
      min-height: 48px;
      box-shadow: 0 0.5px 2px rgba(133, 199, 209, 0.07);
    }
    .history-title {
      color: #89a9a8;
      font-size: 0.98em;
      margin-bottom: 7px;
      font-weight: 500;
      letter-spacing: 0.01em;
    }
    .history-list {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 1.08em;
      color: #5e6f6f;
    }
    .history-list li {
      padding: 3px 0;
      border-bottom: 1px dotted #e1e9e8;
    }
    @media (max-width: 400px) {
      .container { padding: 10px; }
      .display { font-size: 1.2em; }
      button { font-size: 1em; padding: 10px 0; }
      .ads { max-width: 98vw; }
      .history { font-size: 0.98em;}
    }
  </style>
</head>
<body>
  <!-- 광고: 계산기 상단 -->
  <div class="ads">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4634078773523032"
         data-ad-slot="8919515384"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  <div class="container">
    <h1>계산기</h1>
    <input type="text" id="display" class="display" disabled />
    <div class="buttons">
      <button onclick="press('7')">7</button>
      <button onclick="press('8')">8</button>
      <button onclick="press('9')">9</button>
      <button onclick="press('/')">÷</button>
      <button onclick="press('4')">4</button>
      <button onclick="press('5')">5</button>
      <button onclick="press('6')">6</button>
      <button onclick="press('*')">×</button>
      <button onclick="press('1')">1</button>
      <button onclick="press('2')">2</button>
      <button onclick="press('3')">3</button>
      <button onclick="press('-')">−</button>
      <button onclick="press('0')">0</button>
      <button onclick="press('.')">.</button>
      <button class="ac" onclick="allClear()">AC</button>
      <button onclick="press('+')">+</button>
      <button class="equals" onclick="calculate()">=</button>
    </div>
    <!-- 계산 기록 -->
    <div class="history">
      <div class="history-title">과거 계산 기록</div>
      <ul class="history-list" id="historyList"></ul>
    </div>
  </div>
  <!-- 광고: 계산기 하단 -->
  <div class="ads">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4634078773523032"
         data-ad-slot="8919515384"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  <script>
    let current = '';
    const display = document.getElementById('display');
    let history = [];

    function press(val) {
      if (current.length > 20) return; // 입력 제한
      current += val;
      display.value = current;
    }
    function allClear() {
      current = '';
      display.value = '';
    }
    function calculate() {
      try {
        let result = eval(current);
        if (typeof result === 'number' && !isNaN(result)) {
          result = Math.round(result * 1000000000000) / 1000000000000;
        }
        // 기록 추가: "수식 = 결과" 형식
        if (current !== '') {
          history.unshift(current + ' = ' + result);
          if (history.length > 10) history.pop(); // 최근 10개만 보관
          renderHistory();
        }
        display.value = result;
        current = result.toString();
      } catch {
        display.value = 'Error';
        current = '';
      }
    }
    function renderHistory() {
      const list = document.getElementById('historyList');
      list.innerHTML = history.map(item => `<li>${item}</li>`).join('');
    }
    // 키보드 입력 지원 (숫자 키패드 포함 전면 지원)
    document.addEventListener('keydown', function(e) {
      // 일반 숫자키(1~0), 키패드(1~0), 연산자 키패드 모두 지원
      if (e.key.match(/^[0-9]$/) || e.code.match(/^Numpad[0-9]$/)) {
        press(e.key.length === 1 ? e.key : e.code.replace('Numpad',''));
      }
      else if (
        ['+', '-', '*', '/', '.'].includes(e.key) ||
        ['NumpadAdd', 'NumpadSubtract', 'NumpadMultiply', 'NumpadDivide', 'NumpadDecimal'].includes(e.code)
      ) {
        let map = {
          NumpadAdd: '+',
          NumpadSubtract: '-',
          NumpadMultiply: '*',
          NumpadDivide: '/',
          NumpadDecimal: '.'
        };
        press(map[e.code] || e.key);
      }
      else if (e.key === 'Enter' || e.key === '=' || e.code === 'NumpadEnter') {
        calculate();
      }
      else if (e.key === 'Escape') allClear();
      else if (e.key.toLowerCase() === 'c') allClear();
    });
  </script>
</body>
</html>
